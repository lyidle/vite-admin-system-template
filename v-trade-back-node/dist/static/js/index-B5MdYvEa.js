import{ay as N,az as U,a as A,O as E,r as K,o as Q,aA as W,f as u,s as w,y as t,w as a,j as p,h as T,g as k,k as l,P as C,av as v,a5 as Y,E as Z}from"./index-C-Hr_Kst.js";import{E as ee}from"./el-dialog-CCtCXxwB.js";import"./el-overlay-CBSgNWnW.js";import{E as ae,a as te}from"./el-form-item-D5nk7iP3.js";import{A as oe,u as le,E as re}from"./useElUpload-BMw9J73g.js";/* empty css                 */import{E as ie}from"./el-card-BIvMogWJ.js";import{E as ne}from"./el-pagination-DGXCxo0C.js";import{E as se,a as de,b as me}from"./el-table-column-BWkg-oUL.js";import"./el-select-BXzTZbgG.js";import"./el-popover-C7y7ELvv.js";import{E as pe}from"./el-button-CCBhb979.js";import{e as ue}from"./index-DpgMtUJU.js";import{E as ce}from"./index-BcM80TaK.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./refs-i5bx7WgS.js";import"./vnode-Djh7ukKe.js";const ge=(m,o)=>N.get(`${U.MANAGER+"/admin/product/baseTrademark/"+m}/${o}`),_e=m=>m.id?N.put(U.MANAGER+"/admin/product/baseTrademark/update",m):N.post(U.MANAGER+"/admin/product/baseTrademark/save",m),be=m=>N.delete(U.MANAGER+"/admin/product/baseTrademark/remove/"+m),Ee={class:"container"},ke=["src"],ve=["src"],Ne=A({name:"TradeMark"}),Ue=A({...Ne,setup(m){const o=E({pageNo:1,limit:3,total:0,records:[]}),d=E({title:"",dialogFormVisible:!1});let r=E({logoUrl:"",tmName:""});function z(i,e,n){e.trim().length>=2?n():n(new Error("品牌名称需要大于等于两位~"))}function F(i,e,n){e?n():n(new Error("LOGO图片务必上传"))}let g=K();const x=E({tmName:[{required:!0,trigger:"blur",validator:z}],logoUrl:[{required:!0,validator:F}]});async function c(i=1){o.pageNo=i;const e=await ge(o.pageNo,o.limit);e.code===200&&(o.total=e.data.total,o.records=e.data.records.map(n=>({id:n.id,logoUrl:ue(n.logoUrl),tmName:n.tmName})))}function M(){c()}function O(){_(),d.title="添加品牌",d.dialogFormVisible=!0}function R(i){_(),d.title="修改品牌",d.dialogFormVisible=!0,r.id=i.id,r.tmName=i.tmName,r.logoUrl=i.logoUrl}function B(){_(),d.dialogFormVisible=!1}async function G(){await g.value.validate(),(await _e(r)).code===200?(d.dialogFormVisible=!1,v.success(r.id?"修改品牌成功":"添加品牌成功"),c(r.id?o.pageNo:1)):(d.dialogFormVisible=!1,v.error(r.id?"修改品牌失败":"添加品牌失败")),_()}const{beforeUpload:I}=le(),P=i=>{var e;r.logoUrl=i.data,(e=g.value)==null||e.clearValidate("logoUrl")};async function h(i){(await be(i)).code===200?(v.success("删除品牌成功~"),c(o.records.length>1?o.pageNo:o.pageNo-1)):v.error("删除品牌失败")}function _(){r.id=void 0,r.logoUrl="",r.tmName="",Y(()=>{var i;(i=g.value)==null||i.clearValidate()})}return Q(()=>{c()}),(i,e)=>{const n=Z,f=pe,b=se,q=de,$=me,D=ne,L=ie,S=ce,V=ae,j=re,H=te,X=ee,y=W("hasButton");return u(),w("div",null,[t(L,null,{default:a(()=>[p("div",Ee,[T((u(),k(f,{type:"primary",onClick:O},{default:a(()=>[t(n,null,{default:a(()=>e[4]||(e[4]=[p("i",{class:"i-ep-plus"},null,-1)])),_:1}),e[5]||(e[5]=p("span",{style:{"margin-left":"5px"}},"添加品牌",-1))]),_:1})),[[y,"btn.Trademark.add:添加品牌"]]),t($,{style:{width:"100%"},border:"",data:l(o).records},{default:a(()=>[t(b,{type:"index",label:"序号",width:"80",align:"center"}),t(b,{prop:"tmName",label:"品牌名称",width:"width"}),t(b,{label:"品牌LOGO",width:"width"},{default:a(({row:s})=>[p("img",{src:s.logoUrl,alt:"",style:{width:"100px"}},null,8,ke)]),_:1}),t(b,{prop:"prop",label:"品牌仓库",width:"width"},{default:a(({row:s})=>[T((u(),k(f,{type:"warning",size:"small",onClick:J=>R(s)},{default:a(()=>[t(n,null,{default:a(()=>e[6]||(e[6]=[p("i",{class:"i-ep-edit"},null,-1)])),_:1})]),_:2},1032,["onClick"])),[[y,"btn.Trademark.update:修改品牌"]]),t(q,{title:`你确认要删除${s.tmName}么?`,onConfirm:J=>h(s.id)},{reference:a(()=>[T((u(),k(f,{type:"danger",size:"small"},{default:a(()=>[t(n,null,{default:a(()=>e[7]||(e[7]=[p("i",{class:"i-ep-delete"},null,-1)])),_:1})]),_:1})),[[y,"btn.Trademark.remove:删除品牌"]])]),_:2},1032,["title","onConfirm"])]),_:1})]),_:1},8,["data"]),t(D,{"current-page":l(o).pageNo,"onUpdate:currentPage":e[0]||(e[0]=s=>l(o).pageNo=s),"page-size":l(o).limit,"onUpdate:pageSize":e[1]||(e[1]=s=>l(o).limit=s),"page-sizes":[3,5,10],layout:"prev, pager, next,jumper,->,sizes,total",total:l(o).total,background:"",size:"small",onCurrentChange:c,onSizeChange:M},null,8,["current-page","page-size","total"])])]),_:1}),t(X,{modelValue:l(d).dialogFormVisible,"onUpdate:modelValue":e[3]||(e[3]=s=>l(d).dialogFormVisible=s),title:l(d).title,width:"80%"},{footer:a(()=>[t(f,{type:"primary",onClick:B},{default:a(()=>e[9]||(e[9]=[C("取消")])),_:1}),t(f,{type:"primary",onClick:G},{default:a(()=>e[10]||(e[10]=[C("确定")])),_:1})]),default:a(()=>[t(H,{"label-width":"80",model:l(r),rules:l(x),ref_key:"formRef",ref:g},{default:a(()=>[t(V,{label:"品牌名称",prop:"tmName"},{default:a(()=>[t(S,{placeholder:"请您输入品牌名称",modelValue:l(r).tmName,"onUpdate:modelValue":e[2]||(e[2]=s=>l(r).tmName=s)},null,8,["modelValue"])]),_:1}),t(V,{label:"品牌LOGO",prop:"logoUrl"},{default:a(()=>[t(j,{class:"avatar-uploader",action:l(oe).fileUpload,"show-file-list":!1,"on-success":P,"before-upload":l(I)},{default:a(()=>[l(r).logoUrl?(u(),w("img",{key:0,src:l(r).logoUrl,class:"avatar"},null,8,ve)):(u(),k(n,{key:1,class:"avatar-uploader-icon"},{default:a(()=>e[8]||(e[8]=[p("i",{class:"i-ep-plus"},null,-1)])),_:1}))]),_:1},8,["action","before-upload"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}}),qe=fe(Ue,[["__scopeId","data-v-592f59ab"]]);export{qe as default};
